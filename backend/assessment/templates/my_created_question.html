{% extends "base.html" %} {% load crispy_forms_tags %} {% load i18n %}
 {% block title %}my_question{% endblock %} {% block content %}

<div class="mx-md-5 mx-sm-3">
  <div class="row px-md-5 px-3 pb-5">
    <p class="text-2xl mb-3">My question</p>
	<a href="{% url 'tantorial_assessment:create_question' pk %}">
            <button
              type="button"
              class="btn rounded-full bg-green-400 shadow-lg shadow-red-500 hover:shadow-orange-200 font-bold font-serif my-2"
              class="btn bg-red-500"
            >
              Add Questions
            </button>
          </a>
    {% for question in questions %}
    <div
      class="col-12 col-md-6 col-sm-6 p-md-5 mt-3 shadow-2xl mt-sm-5 hover:bg-gradient-to-r from-green-200 to-blue-300"
    >
      <div class="card-header">

          <p class="fw-bold text-2xl text-black capitalize my-2">
            # {{question.question_no}}
          </p>
        <p class="fw-bold text-2xl text-black capitalize my-2">
            {{question.question}}
          </p>
      </div>
	  {% if question.correct_answer == 'a' %}
	  <div class="alert alert-success" role="alert">
        A - {{question.answer_a}}
      </div>
	  {% else %}
	  <div class="alert alert-danger" role="alert">
        A - {{question.answer_a}}
      </div>
	  {% endif %}
      {% if question.correct_answer == 'b' %}
	  <div class="alert alert-success" role="alert">
        B - {{question.answer_b}}
      </div>
	  {% else %}
	  <div class="alert alert-danger" role="alert">
        A - {{question.answer_b}}
      </div>
	  {% endif %}
	  {% if question.correct_answer == 'c' %}
	  <div class="alert alert-success" role="alert">
        C - {{question.answer_c}}
      </div>
	  {% else %}
	  <div class="alert alert-danger" role="alert">
        C - {{question.answer_c}}
      </div>
	  {% endif %}
	  {% if question.correct_answer == 'd' %}
	  <div class="alert alert-success" role="alert">
        D - {{question.answer_d}}
      </div>
	  {% else %}
	  <div class="alert alert-danger" role="alert">
        D - {{question.answer_d}}
      </div>
	  {% endif %}

      <div>
        <button
          type="button"
          class="btn rounded-full bg-green-400 shadow-lg shadow-red-500 hover:shadow-orange-200 font-bold font-serif my-2"
          data-bs-toggle="modal"
          data-bs-target="#correctanswer{{question.id}}"
        >
          Correct Answer: {{question.correct_answer|capfirst }}
        </button>
      </div>
      <a href="{% url 'tantorial_assessment:update_question' question.id %}">
        <button
          type="button"
          class="btn rounded-full bg-purple-400 shadow-lg shadow-red-500 hover:shadow-orange-200 font-bold font-serif my-2"
          class="btn bg-red-500"
        >
          Update
        </button>
      </a>

      <button
        type="button"
        class="btn rounded-full bg-red-400 shadow-lg shadow-red-500 hover:shadow-orange-200 font-bold font-serif my-2"
        class="btn bg-red-500"
        data-bs-toggle="modal"
        data-bs-target="#deletequestion{{question.id}}"
      >
        Delete question: {{question.question_no}}
      </button>
      <div
        class="modal fade mt-5"
        id="deletequestion{{question.id}}"
        tabindex="-1"
        aria-labelledby="deletequestionLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title text-center" id="deletequestionLabel">
                Delete Question {{question.question_no}}
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body text-center">
              Are You sure you want to remove this question?
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn bg-green-400 shadow-lg"
                data-bs-dismiss="modal"
              >
                No
              </button>
              <form
                id="subject-delete"
                method="POST"
                action="{% url 'tantorial_assessment:delete_question' question.id %}"
              >
                {% csrf_token %}
                <button type="submit" class="btn bg-red-400 shadow-lg">
                  Yes
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
      <!-- Modal for correct answer Explanation -->
      <div
        class="modal fade"
        id="correctanswer{{question.id}}"
        tabindex="-1"
        role="dialog"
        aria-labelledby="exampleModalLongTitle"
        aria-hidden="true"
      >
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">
                Explanation
              </h5>
              <button
                type="button"
                class="close"
                data-bs-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
				{{question.explanation|title}}
			</div>
            <div class="modal-footer">
              <button
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    {% endfor %}
  </div>
</div>
{% endblock %}
